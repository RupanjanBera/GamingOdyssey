<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RB Notes | Secure Class 11 English Portal</title>
    <style>
        /* ================= CSS VARIABLES & THEMING ================= */
        :root {
            --bg-base: #050505;
            --bg-grad-start: #0f172a;
            --bg-grad-mid: #0a0a0a;
            --bg-grad-end: #1e1b4b;
            --accent: #6366f1;
            --accent-hover: #4f46e5;
            --accent-glow: rgba(99, 102, 241, 0.5);
            --accent-danger: #f43f5e;
            --glass-bg: rgba(20, 20, 25, 0.4);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.6);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --card-bg: rgba(15, 23, 42, 0.5);
            --font-family: 'Inter', system-ui, -apple-system, sans-serif;
            --transition-smooth: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="light"] {
            --bg-base: #f1f5f9;
            --bg-grad-start: #e2e8f0;
            --bg-grad-mid: #cbd5e1;
            --bg-grad-end: #f8fafc;
            --accent: #4f46e5;
            --accent-hover: #4338ca;
            --accent-glow: rgba(79, 70, 229, 0.3);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(0, 0, 0, 0.1);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
            --text-main: #0f172a;
            --text-muted: #475569;
            --card-bg: rgba(255, 255, 255, 0.9);
        }

        /* ================= RESET & ANTI-COPY BASE ================= */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: var(--font-family);
            background-color: var(--bg-base);
            background-image: radial-gradient(circle at top left, var(--bg-grad-start), transparent 40%),
                              radial-gradient(circle at bottom right, var(--bg-grad-end), transparent 40%);
            background-attachment: fixed;
            color: var(--text-main);
            height: 100vh;
            overflow: hidden;
            display: flex;
            transition: background 0.5s ease, color 0.5s ease;
            
            /* Anti-copy global rules */
            user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;
            -webkit-touch-callout: none;
        }

        /* ================= UTILITIES ================= */
        .glass { background: var(--glass-bg); backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px); border: 1px solid var(--glass-border); box-shadow: var(--glass-shadow); }
        .fade-in { animation: fadeIn 0.8s ease-out forwards; opacity: 0; }
        .slide-up { animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(30px); }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }
        
        button { cursor: pointer; font-family: inherit; border: none; outline: none; transition: var(--transition-smooth); display: inline-flex; align-items: center; justify-content: center; gap: 8px; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(150, 150, 150, 0.3); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent); }

        /* ================= CUSTOM CONTEXT MENU ================= */
        #custom-context-menu {
            position: fixed; background: var(--card-bg); backdrop-filter: blur(20px);
            border: 1px solid var(--accent-danger); border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.8);
            padding: 8px; z-index: 99999; display: none; min-width: 240px;
        }
        .context-header { padding: 8px 15px 12px; font-size: 0.8rem; color: var(--accent-danger); text-transform: uppercase; font-weight: 800; border-bottom: 1px solid var(--glass-border); margin-bottom: 5px; text-align: center; letter-spacing: 1px; }
        .context-item { padding: 10px 15px; border-radius: 8px; color: var(--text-main); font-size: 0.9rem; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: 0.2s; }
        .context-item:hover { background: rgba(255,255,255,0.1); }
        .context-item kbd { margin-left: auto; font-size: 0.75rem; opacity: 0.6; background: rgba(0,0,0,0.3); padding: 3px 6px; border-radius: 4px; border: 1px solid var(--glass-border); }

        /* ================= DETAILED LANDING PAGE ================= */
        #landing-page {
            position: absolute; inset: 0; z-index: 5000; overflow-y: auto; overflow-x: hidden;
            background-color: var(--bg-base); background-image: radial-gradient(circle at 50% -20%, var(--bg-grad-start), transparent 60%);
            transition: opacity 0.6s ease, visibility 0.6s; display: flex; flex-direction: column;
            scroll-behavior: smooth;
        }

        .landing-nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 5%; width: 100%; position: sticky; top: 0; z-index: 100; background: rgba(5,5,5,0.8); backdrop-filter: blur(20px); border-bottom: 1px solid var(--glass-border); }
        .brand-logo { font-size: 1.6rem; font-weight: 800; display: flex; align-items: center; gap: 12px; letter-spacing: -0.5px; }
        .brand-logo span { padding: 4px 8px; background: var(--accent); border-radius: 8px; font-size: 1rem; color: white; }
        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-links a { color: var(--text-muted); text-decoration: none; font-weight: 600; transition: 0.3s; font-size: 0.95rem; }
        .nav-links a:hover { color: var(--text-main); }
        
        .hero-section { min-height: 90vh; display: flex; align-items: center; justify-content: space-between; padding: 80px 5%; gap: 50px; position: relative; }
        .hero-content { flex: 1; max-width: 650px; z-index: 2; }
        .hero-tag { display: inline-flex; align-items: center; gap: 8px; padding: 8px 20px; border-radius: 30px; background: rgba(99, 102, 241, 0.1); color: var(--accent); font-size: 0.85rem; font-weight: 700; border: 1px solid rgba(99, 102, 241, 0.3); margin-bottom: 30px; letter-spacing: 1px; text-transform: uppercase; box-shadow: 0 0 20px var(--accent-glow); }
        .hero-tag span { display: block; width: 8px; height: 8px; background: var(--accent); border-radius: 50%; box-shadow: 0 0 10px var(--accent); animation: blink 2s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        
        .hero-title { font-size: 4.5rem; font-weight: 900; line-height: 1.1; margin-bottom: 25px; letter-spacing: -1.5px; }
        .hero-title span { background: linear-gradient(135deg, #818cf8 0%, #c084fc 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero-subtitle { font-size: 1.2rem; color: var(--text-muted); margin-bottom: 45px; line-height: 1.8; max-width: 550px; }
        
        .btn-glow { background: linear-gradient(135deg, var(--accent), #818cf8); color: white; padding: 18px 45px; font-size: 1.1rem; font-weight: 700; border-radius: 14px; box-shadow: 0 10px 30px var(--accent-glow); transition: var(--transition-smooth); text-transform: uppercase; letter-spacing: 1px; }
        .btn-glow:hover { transform: translateY(-3px) scale(1.02); box-shadow: 0 15px 45px var(--accent-glow); }

        .hero-image-wrapper { flex: 1; display: flex; justify-content: center; position: relative; }
        .hero-image { width: 100%; max-width: 550px; height: 650px; border-radius: 30px; object-fit: cover; box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.8); border: 1px solid var(--glass-border); animation: float 8s ease-in-out infinite; }

        /* Detail Sections */
        .info-section { padding: 100px 5%; text-align: center; position: relative; }
        .info-section::before { content: ''; position: absolute; top: 0; left: 20%; right: 20%; height: 1px; background: linear-gradient(90deg, transparent, var(--glass-border), transparent); }
        .section-title { font-size: 2.5rem; font-weight: 800; margin-bottom: 20px; }
        .section-desc { font-size: 1.1rem; color: var(--text-muted); max-width: 700px; margin: 0 auto 60px; line-height: 1.7; }
        
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1200px; margin: 0 auto; }
        .feature-card { background: var(--card-bg); border: 1px solid var(--glass-border); padding: 40px 30px; border-radius: 20px; text-align: left; transition: 0.3s; position: relative; overflow: hidden; }
        .feature-card::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: transparent; transition: 0.3s; }
        .feature-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        .feature-card:hover::after { background: var(--accent); }
        .feature-icon { font-size: 2.5rem; margin-bottom: 20px; background: rgba(255,255,255,0.05); width: 70px; height: 70px; display: flex; align-items: center; justify-content: center; border-radius: 16px; border: 1px solid var(--glass-border); }
        .feature-card h3 { font-size: 1.4rem; font-weight: 700; margin-bottom: 15px; }
        .feature-card p { color: var(--text-muted); line-height: 1.6; font-size: 0.95rem; }

        .footer { padding: 40px 5%; text-align: center; border-top: 1px solid var(--glass-border); color: var(--text-muted); font-size: 0.9rem; background: rgba(0,0,0,0.5); }

        /* ================= MAIN APP WORKSPACE ================= */
        .app-container { display: none; width: 100%; height: 100%; opacity: 0; transition: opacity 0.6s ease; }

        /* SIDEBAR */
        .sidebar { width: 350px; height: 100%; display: flex; flex-direction: column; flex-shrink: 0; border-right: 1px solid var(--glass-border); background: var(--card-bg); backdrop-filter: blur(30px); z-index: 100; transition: transform 0.4s ease; box-shadow: 5px 0 30px rgba(0,0,0,0.3); }
        
        .sidebar-profile { padding: 25px; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid var(--glass-border); }
        .profile-avatar { width: 50px; height: 50px; border-radius: 14px; background: linear-gradient(135deg, var(--accent), #c084fc); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 800; color: white; box-shadow: 0 4px 15px var(--accent-glow); }
        .profile-info h4 { font-size: 1.1rem; font-weight: 700; margin-bottom: 4px; }
        .profile-info p { font-size: 0.8rem; color: var(--accent); font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }

        .search-wrapper { padding: 20px 25px; }
        .search-input { width: 100%; padding: 14px 15px 14px 40px; border-radius: 12px; border: 1px solid var(--glass-border); background: rgba(0, 0, 0, 0.2) url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="%2394a3b8" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>') no-repeat 15px center; color: var(--text-main); font-size: 0.95rem; transition: var(--transition-smooth); }
        .search-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 4px var(--accent-glow); background-color: rgba(0,0,0,0.4); }

        .notes-list { list-style: none; flex: 1; overflow-y: auto; padding: 0 15px 15px; }
        .note-category { padding: 10px 10px 5px; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; font-weight: 800; letter-spacing: 1px; margin-top: 10px; }
        
        .note-item { padding: 15px; margin-bottom: 10px; border-radius: 14px; background: rgba(255, 255, 255, 0.03); border: 1px solid transparent; cursor: pointer; transition: var(--transition-smooth); display: flex; justify-content: space-between; align-items: center; gap: 10px; position: relative; overflow: hidden; }
        .note-item::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: var(--accent); transform: scaleY(0); transition: 0.3s; transform-origin: bottom; }
        .note-item:hover { background: rgba(255, 255, 255, 0.06); transform: translateX(5px); }
        .note-item.active { background: rgba(99, 102, 241, 0.1); border-color: var(--glass-border); box-shadow: 0 4px 20px rgba(0,0,0,0.2); }
        .note-item.active::before { transform: scaleY(1); }
        
        .note-name-wrap { display: flex; align-items: center; gap: 12px; overflow: hidden; flex: 1; }
        .note-icon { background: rgba(255,255,255,0.05); width: 36px; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; flex-shrink: 0; border: 1px solid var(--glass-border); }
        .note-name { font-size: 0.95rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--text-main); }
        
        .note-actions { display: flex; gap: 5px; opacity: 0; transition: 0.2s; }
        .note-item:hover .note-actions, .note-item.active .note-actions { opacity: 1; }
        .icon-btn { background: transparent; color: var(--text-muted); font-size: 1.1rem; padding: 8px; border-radius: 8px; }
        .icon-btn:hover { background: rgba(255,255,255,0.1); color: var(--text-main); }
        .fav-btn.active { color: #fbbf24; opacity: 1; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); } 
        .delete-btn { color: #fca5a5; display: none; }
        .admin-mode .delete-btn { display: inline-flex; }
        .admin-mode .delete-btn:hover { color: var(--accent-danger); background: rgba(239, 68, 68, 0.2); }

        .admin-controls-sidebar { padding: 25px; border-top: 1px solid var(--glass-border); display: none; background: rgba(0,0,0,0.2); }
        .admin-mode .admin-controls-sidebar { display: block; animation: slideUp 0.3s ease; }
        .btn-upload { width: 100%; background: var(--accent); color: white; padding: 16px; border-radius: 12px; font-weight: 700; font-size: 1.05rem; box-shadow: 0 4px 20px var(--accent-glow); }
        .btn-upload:hover { background: var(--accent-hover); transform: translateY(-2px); box-shadow: 0 8px 25px var(--accent-glow); }

        /* MAIN CONTENT */
        .main-content { flex: 1; display: flex; flex-direction: column; height: 100vh; position: relative; }

        .header { display: flex; justify-content: space-between; align-items: center; padding: 15px 30px; border-bottom: 1px solid var(--glass-border); background: var(--card-bg); backdrop-filter: blur(20px); z-index: 10; }
        
        .breadcrumb { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; font-weight: 600; color: var(--text-muted); }
        .breadcrumb span.active { color: var(--text-main); }
        
        .study-timer { display: flex; align-items: center; gap: 8px; background: rgba(0,0,0,0.3); padding: 8px 16px; border-radius: 20px; border: 1px solid var(--glass-border); font-family: monospace; font-size: 1.1rem; color: var(--accent); font-weight: 800; letter-spacing: 1px; }

        .toolbar { display: flex; gap: 12px; align-items: center; }
        .toolbar-btn { background: var(--glass-bg); color: var(--text-main); padding: 10px 18px; border-radius: 10px; border: 1px solid var(--glass-border); font-size: 0.9rem; font-weight: 600; transition: 0.3s; }
        .toolbar-btn:hover { background: rgba(255,255,255,0.1); transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        
        .admin-toggle-btn { background: transparent; color: var(--text-muted); padding: 10px 16px; border-radius: 10px; border: 1px dashed var(--glass-border); font-weight: 700; }
        .admin-toggle-btn:hover { border-style: solid; color: var(--text-main); }
        .admin-toggle-btn.active { color: var(--accent-danger); border-color: var(--accent-danger); background: rgba(239, 68, 68, 0.1); border-style: solid; }

        /* VIEWER AREA */
        .viewer-area-wrapper { flex: 1; overflow-y: auto; padding: 30px; display: flex; justify-content: center; background: rgba(0,0,0,0.3); position: relative; }
        [data-theme="light"] .viewer-area-wrapper { background: rgba(0,0,0,0.05); }

        .viewer-container { width: 100%; max-width: 950px; height: 100%; min-height: 800px; background: #ffffff; border-radius: 20px; box-shadow: 0 30px 60px rgba(0,0,0,0.5); border: 1px solid var(--glass-border); overflow: hidden; position: relative; display: flex; flex-direction: column; transition: max-width 0.3s ease; }
        .viewer-container.reading-mode { max-width: 100%; border-radius: 0; border: none; }
        
        /* Dynamic Watermark overlaying the iframe. 
           pointer-events: none ensures scrolling passes through to the iframe */
        .viewer-watermark { position: absolute; inset: 0; z-index: 5; display: flex; flex-wrap: wrap; align-content: flex-start; overflow: hidden; opacity: 0.06; pointer-events: none; user-select: none; }
        .watermark-text { font-size: 2.5rem; font-weight: 900; color: #000; transform: rotate(-30deg); margin: 60px; white-space: nowrap; text-transform: uppercase; }

        iframe { width: 100%; height: 100%; border: none; flex: 1; display: none; z-index: 1; background: #fff; }

        .empty-state { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: var(--card-bg); backdrop-filter: blur(20px); color: var(--text-muted); text-align: center; padding: 40px; z-index: 10; }
        .empty-state-icon { font-size: 5rem; margin-bottom: 30px; opacity: 0.8; background: var(--glass-bg); padding: 40px; border-radius: 50%; border: 1px solid var(--glass-border); box-shadow: inset 0 0 30px rgba(0,0,0,0.5); text-shadow: 0 0 20px rgba(255,255,255,0.2); }
        .empty-state h3 { font-size: 2rem; color: var(--text-main); margin-bottom: 15px; font-weight: 800; letter-spacing: -0.5px; }

        /* MODALS & TOASTS */
        .toast-container { position: fixed; bottom: 40px; right: 40px; display: flex; flex-direction: column; gap: 15px; z-index: 99999; pointer-events: none; }
        .toast { padding: 16px 24px; border-radius: 14px; background: var(--card-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); color: var(--text-main); box-shadow: 0 20px 40px rgba(0,0,0,0.6); display: flex; align-items: center; gap: 15px; font-size: 1rem; font-weight: 600; animation: slideInRight 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; pointer-events: all; }
        .toast.error { border-left: 5px solid var(--accent-danger); }
        .toast.success { border-left: 5px solid #10b981; }
        .toast.warning { border-left: 5px solid #f59e0b; }
        @keyframes slideInRight { from { transform: translateX(120%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        .modal-overlay { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(15px); display: flex; align-items: center; justify-content: center; z-index: 90000; opacity: 0; pointer-events: none; transition: var(--transition-smooth); }
        .modal-overlay.active { opacity: 1; pointer-events: all; }
        .modal-box { background: var(--bg-base); width: 90%; max-width: 450px; padding: 40px; border-radius: 24px; border: 1px solid var(--glass-border); transform: translateY(30px) scale(0.95); transition: var(--transition-smooth); box-shadow: 0 40px 80px rgba(0,0,0,0.8); position: relative; overflow: hidden; }
        .modal-overlay.active .modal-box { transform: translateY(0) scale(1); }
        .modal-box::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 5px; background: linear-gradient(90deg, var(--accent), #c084fc); }
        .modal-title { margin-bottom: 20px; font-size: 1.6rem; font-weight: 800; letter-spacing: -0.5px; }
        .modal-input { width: 100%; padding: 16px; margin-bottom: 30px; border-radius: 12px; border: 1px solid var(--glass-border); background: rgba(0,0,0,0.3); color: var(--text-main); font-size: 1.1rem; transition: 0.3s; font-family: monospace; letter-spacing: 3px; text-align: center; }
        .modal-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 4px var(--accent-glow); background: rgba(0,0,0,0.5); }
        .modal-actions { display: flex; justify-content: stretch; gap: 15px; }
        .modal-actions button { flex: 1; padding: 14px; border-radius: 12px; font-weight: 700; font-size: 1.05rem; }
        .btn-primary { background: var(--accent); color: white; box-shadow: 0 4px 20px var(--accent-glow); }
        .btn-primary:hover { background: var(--accent-hover); transform: translateY(-2px); }
        .btn-secondary { background: rgba(255,255,255,0.05); color: var(--text-main); border: 1px solid var(--glass-border); }
        .btn-secondary:hover { background: rgba(255,255,255,0.1); }

        .loader { display: none; border: 3px solid rgba(255,255,255,0.2); border-left-color: #fff; border-radius: 50%; width: 22px; height: 22px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* RESPONSIVENESS */
        .hamburger, .close-sidebar { display: none; background: transparent; color: var(--text-main); font-size: 1.8rem; }
        .mobile-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); z-index: 90; display: none; opacity: 0; transition: opacity 0.3s; }
        
        @media (max-width: 1024px) {
            .hero-section { flex-direction: column; text-align: center; padding-top: 60px; gap: 40px; }
            .hero-title { font-size: 3.5rem; }
            .hero-image { height: 400px; }
            .nav-links { display: none; }
        }
        @media (max-width: 900px) {
            .sidebar { position: fixed; left: 0; top: 0; transform: translateX(-100%); box-shadow: 10px 0 50px rgba(0,0,0,0.9); }
            .sidebar.open { transform: translateX(0); }
            .mobile-overlay.open { display: block; opacity: 1; }
            .hamburger, .close-sidebar { display: block; }
            .header { padding: 15px 20px; flex-wrap: wrap; }
            .study-timer { display: none; } /* Hide timer on mobile to save space */
            .viewer-area-wrapper { padding: 10px; }
            .viewer-container { min-height: calc(100vh - 120px); border-radius: 12px; }
            .toolbar-btn span { display: none; }
        }
    </style>
</head>
<body>

    <div id="custom-context-menu">
        <div class="context-header">Action Blocked</div>
        <div style="padding: 10px 15px; font-size: 0.9rem; color: var(--text-muted); text-align: center; margin-bottom: 5px;">
            Left-click text selection and copying are disabled in this secure workspace.
        </div>
        <div style="height: 1px; background: var(--glass-border); margin: 5px 0;"></div>
        <div class="context-item allow-click" id="ctx-theme">üåì Toggle Theme</div>
        <div class="context-item allow-click" id="ctx-fullscreen">‚õ∂ Focus Mode <kbd>F11</kbd></div>
    </div>

    <div id="landing-page">
        <nav class="landing-nav fade-in">
            <div class="brand-logo">RB Notes <span>PRO</span></div>
            <div class="nav-links">
                <a href="#features" class="allow-click">Features</a>
                <a href="#security" class="allow-click">Security</a>
            </div>
            <button class="icon-btn allow-click" id="theme-toggle-landing" title="Toggle Theme">üåì</button>
        </nav>

        <section class="hero-section">
            <div class="hero-content slide-up">
                <div class="hero-tag"><span></span> Secure Workspace ‚Ä¢ Class 11 CBSE</div>
                <h1 class="hero-title">Master English with <span>Absolute Focus.</span></h1>
                <p class="hero-subtitle">Access premium, structured PDF notes for Hornbill and Snapshots in a highly secure, distraction-free environment. Built with anti-copy technology to keep materials exclusive.</p>
                <button class="btn-glow allow-click" id="btn-get-started">Enter Secure Portal &rarr;</button>
            </div>
            <div class="hero-image-wrapper fade-in" style="animation-delay: 0.3s;">
                <img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=800&q=80" alt="Study Dashboard" class="hero-image">
            </div>
        </section>

        <section id="features" class="info-section">
            <h2 class="section-title slide-up">Why RB Notes?</h2>
            <p class="section-desc slide-up">We built this platform to ensure that your study materials remain exclusive, organized, and optimized for long reading sessions without eye strain.</p>
            
            <div class="feature-grid slide-up">
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3>Lightning Fast Viewer</h3>
                    <p>Documents render instantly in an optimized viewer. Scroll smoothly through massive PDFs without lag or stuttering.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <h3>Anti-Theft Engine</h3>
                    <p>Advanced JavaScript hooks prevent left-click selection and block keyboard shortcuts to protect document integrity.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚è±Ô∏è</div>
                    <h3>Study Session Tracker</h3>
                    <p>Stay productive with a built-in session timer that tracks your exact reading duration once you enter the portal.</p>
                </div>
            </div>
        </section>

        <footer class="footer">
            <p>&copy; <span id="current-year"></span> RB Notes Secure Portal. All rights reserved. | Optimized for Class 11 CBSE.</p>
        </footer>
    </div>

    <div class="app-container" id="app-container">
        <div class="mobile-overlay allow-click" id="mobile-overlay"></div>

        <aside class="sidebar" id="sidebar">
            <div class="sidebar-profile">
                <div class="profile-avatar">RB</div>
                <div class="profile-info">
                    <h4>CBSE Class 11</h4>
                    <p>English Core (301)</p>
                </div>
                <button class="close-sidebar allow-click" id="close-sidebar" style="margin-left:auto;">&times;</button>
            </div>
            
            <div class="search-wrapper">
                <input type="text" class="search-input allow-click" id="search-input" placeholder="Search syllabus (Ctrl+F)">
            </div>

            <div class="notes-list" id="notes-list">
                </div>

            <div class="admin-controls-sidebar" id="admin-controls">
                <button class="btn-upload allow-click" id="trigger-upload-btn">
                    <span id="upload-icon">üìÑ Upload Encrypted PDF</span>
                    <div class="loader" id="upload-loader"></div>
                </button>
                <input type="file" id="file-input" class="allow-click" accept="application/pdf" multiple style="display: none;">
            </div>
        </aside>

        <main class="main-content">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 15px;">
                    <button class="hamburger allow-click" id="open-sidebar">‚ò∞</button>
                    <div class="breadcrumb">
                        <span>Library</span>
                        <span>/</span>
                        <span class="active" id="current-doc-title">No Document Selected</span>
                    </div>
                </div>
                
                <div style="display: flex; align-items: center; gap: 20px;">
                    <div class="study-timer" title="Session Duration">
                        <span style="font-size: 0.9rem; opacity: 0.6;">‚è±Ô∏è</span>
                        <span id="timer-display">00:00:00</span>
                    </div>

                    <div class="toolbar">
                        <button class="icon-btn allow-click" id="theme-toggle-app" title="Toggle Mode">üåì</button>
                        <button class="toolbar-btn allow-click" id="btn-reading-mode" title="Toggle Full Width">üìñ <span>Read Mode</span></button>
                        <button class="toolbar-btn allow-click" id="btn-fullscreen" title="Fullscreen (F11)">‚õ∂ <span>Focus</span></button>
                        <div style="width: 1px; height: 24px; background: var(--glass-border); margin: 0 5px;"></div>
                        <button class="admin-toggle-btn allow-click" id="admin-toggle-btn" title="Admin Login (Alt+A)">üîí Admin</button>
                    </div>
                </div>
            </header>

            <div class="viewer-area-wrapper">
                <div class="viewer-container" id="viewer-container">
                    
                    <div class="viewer-watermark" id="watermark-layer"></div>

                    <div class="empty-state" id="empty-state">
                        <div class="empty-state-icon">üõ°Ô∏è</div>
                        <h3>Workspace Locked</h3>
                        <p style="font-size: 1.05rem; max-width: 450px; margin-top: 10px; line-height: 1.6;">Select a document from the library panel to view it here. All content is protected by RB Notes anti-copy mechanisms.</p>
                    </div>
                    
                    <iframe id="pdf-viewer"></iframe>
                </div>
            </div>
        </main>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <div class="modal-overlay" id="password-modal">
        <div class="modal-box">
            <h3 class="modal-title">Authentication Required</h3>
            <p style="font-size: 0.95rem; color: var(--text-muted); margin-bottom: 25px;">Enter system administrator password to bypass security constraints and manage files.</p>
            <input type="password" class="modal-input allow-click" id="admin-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="off">
            <div class="modal-actions">
                <button class="btn-secondary allow-click" id="btn-cancel-admin">Cancel</button>
                <button class="btn-primary allow-click" id="btn-submit-admin">Authorize Access</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="delete-modal">
        <div class="modal-box">
            <h3 class="modal-title">Confirm Data Wipe</h3>
            <p style="font-size: 1rem; color: var(--text-muted); margin-bottom: 25px;">This will permanently wipe the PDF document from the secure local database. This action cannot be reversed.</p>
            <div class="modal-actions">
                <button class="btn-secondary allow-click" id="btn-cancel-delete">Abort</button>
                <button class="btn-primary allow-click" style="background: var(--accent-danger);" id="btn-confirm-delete">Confirm Wipe</button>
            </div>
        </div>
    </div>

    <script>
        // APP STATE & CONFIG
        let notes = [];
        let activeNoteId = null;
        let isAdmin = false;
        let noteToDelete = null;
        let currentTheme = 'dark';
        
        // Timer State
        let timerInterval;
        let secondsElapsed = 0;

        const ADMIN_PWD = "odyssey";

        // INDEXEDDB SETUP
        let db;
        const dbName = "CBSE_EngX_SecureDB_FINAL";
        const storeName = "secure_pdfs";

        // DOM ELEMENTS
        const landingPage = document.getElementById('landing-page');
        const appContainer = document.getElementById('app-container');
        const btnGetStarted = document.getElementById('btn-get-started');
        const currentYearEl = document.getElementById('current-year');

        const sidebar = document.getElementById('sidebar');
        const openSidebarBtn = document.getElementById('open-sidebar');
        const closeSidebarBtn = document.getElementById('close-sidebar');
        const mobileOverlay = document.getElementById('mobile-overlay');
        const notesListEl = document.getElementById('notes-list');
        const searchInput = document.getElementById('search-input');
        
        const themeToggleLanding = document.getElementById('theme-toggle-landing');
        const themeToggleApp = document.getElementById('theme-toggle-app');

        const adminToggleBtn = document.getElementById('admin-toggle-btn');
        const triggerUploadBtn = document.getElementById('trigger-upload-btn');
        const fileInput = document.getElementById('file-input');
        const uploadLoader = document.getElementById('upload-loader');
        const uploadIcon = document.getElementById('upload-icon');
        
        const viewerContainer = document.getElementById('viewer-container');
        const pdfViewer = document.getElementById('pdf-viewer');
        const emptyState = document.getElementById('empty-state');
        const watermarkLayer = document.getElementById('watermark-layer');
        const currentDocTitle = document.getElementById('current-doc-title');
        
        const btnFullscreen = document.getElementById('btn-fullscreen');
        const btnReadingMode = document.getElementById('btn-reading-mode');
        const timerDisplay = document.getElementById('timer-display');
        const toastContainer = document.getElementById('toast-container');

        const passwordModal = document.getElementById('password-modal');
        const adminPasswordInput = document.getElementById('admin-password');
        const btnSubmitAdmin = document.getElementById('btn-submit-admin');
        const btnCancelAdmin = document.getElementById('btn-cancel-admin');
        
        const deleteModal = document.getElementById('delete-modal');
        const btnConfirmDelete = document.getElementById('btn-confirm-delete');
        const btnCancelDelete = document.getElementById('btn-cancel-delete');

        // Context Menu
        const contextMenu = document.getElementById('custom-context-menu');

        // ================= INITIALIZATION =================
        function init() {
            if(currentYearEl) currentYearEl.textContent = new Date().getFullYear();
            loadThemePreference();
            initDatabase();
            generateWatermarks();
            setupEventListeners();
            setupSecurityProtocols();
        }

        // ================= SECURITY PROTOCOLS (Anti-Left Click & Keyboard Restricts) =================
        function setupSecurityProtocols() {
            
            // 1. Anti-Left Click (Allows scrolling, blocks text selection)
            document.addEventListener('mousedown', (e) => {
                // If left click
                if (e.button === 0) {
                    // Check if clicked element or its parent has 'allow-click' class OR is a standard interactive tag
                    const isInteractive = e.target.closest('button, input, a, .allow-click, .note-item, .context-item');
                    
                    if (!isInteractive) {
                        e.preventDefault(); // Stop text selection
                        const { clientX: mouseX, clientY: mouseY } = e;
                        
                        // Show custom warning menu
                        contextMenu.style.top = `${mouseY}px`;
                        contextMenu.style.left = `${mouseX}px`;
                        contextMenu.style.display = 'block';
                    } else {
                        contextMenu.style.display = 'none';
                    }
                }
            });

            // Prevent right-click native menu everywhere
            document.addEventListener('contextmenu', (e) => e.preventDefault());

            // 2. Keyboard Shortcuts & Anti-Copy
            document.addEventListener('keydown', (e) => {
                // Prevent Copy/Save/Print shortcuts
                if (e.ctrlKey || e.metaKey) {
                    const key = e.key.toLowerCase();
                    if (['c', 's', 'p', 'x', 'a', 'u'].includes(key)) {
                        e.preventDefault();
                        showToast("Action disabled by RB Security Policy.", "error");
                    }
                }

                // Global App Shortcuts
                if (e.altKey && e.key.toLowerCase() === 'a') { e.preventDefault(); triggerAdminAuth(); }
                if (e.ctrlKey && e.key.toLowerCase() === 'f') { e.preventDefault(); searchInput.focus(); }
                if (e.key === 'Escape') { 
                    passwordModal.classList.remove('active'); 
                    deleteModal.classList.remove('active'); 
                    contextMenu.style.display = 'none';
                }
            });

            // 3. Print Screen Key Listener (Just show toast now)
            document.addEventListener('keyup', (e) => {
                if (e.key === 'PrintScreen' || e.code === 'PrintScreen') {
                    showToast("Screenshot attempt logged.", "error");
                    navigator.clipboard.writeText("Screenshot functionality disabled by RB Notes Security.");
                }
            });
        }

        function generateWatermarks() {
            let html = "";
            for(let i=0; i<40; i++) {
                html += `<div class="watermark-text">Top secret RB notes</div>`;
            }
            watermarkLayer.innerHTML = html;
        }

        // ================= TIMER LOGIC =================
        function startTimer() {
            if(timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                secondsElapsed++;
                const h = String(Math.floor(secondsElapsed / 3600)).padStart(2, '0');
                const m = String(Math.floor((secondsElapsed % 3600) / 60)).padStart(2, '0');
                const s = String(secondsElapsed % 60).padStart(2, '0');
                timerDisplay.textContent = `${h}:${m}:${s}`;
            }, 1000);
        }

        // ================= DATABASE LOGIC =================
        function initDatabase() {
            const request = indexedDB.open(dbName, 1);
            request.onerror = () => showToast("Database Security Fault.", "error");
            request.onupgradeneeded = (e) => {
                db = e.target.result;
                if (!db.objectStoreNames.contains(storeName)) db.createObjectStore(storeName, { keyPath: "id" });
            };
            request.onsuccess = (e) => { db = e.target.result; loadNotesFromDB(); };
        }

        function loadNotesFromDB() {
            const transaction = db.transaction([storeName], "readonly");
            const request = transaction.objectStore(storeName).getAll();
            request.onsuccess = (e) => {
                notes = e.target.result;
                sortNotes();
                renderSidebar();
            };
        }

        function saveNoteToDB(note) {
            return new Promise((resolve, reject) => {
                const transaction = db.transaction([storeName], "readwrite");
                const request = transaction.objectStore(storeName).put(note);
                request.onsuccess = () => resolve();
                request.onerror = (e) => reject(e.target.error);
            });
        }

        function deleteNoteFromDB(id) {
            return new Promise((resolve, reject) => {
                const transaction = db.transaction([storeName], "readwrite");
                const request = transaction.objectStore(storeName).delete(id);
                request.onsuccess = () => resolve();
                request.onerror = (e) => reject(e.target.error);
            });
        }

        // ================= EVENT LISTENERS =================
        function setupEventListeners() {
            // Context Menu Custom Actions
            document.getElementById('ctx-theme').addEventListener('click', () => { toggleTheme(); contextMenu.style.display='none'; });
            document.getElementById('ctx-fullscreen').addEventListener('click', () => { toggleFullscreen(); contextMenu.style.display='none'; });

            btnGetStarted.addEventListener('click', () => {
                landingPage.style.opacity = '0';
                setTimeout(() => { 
                    landingPage.style.display = 'none'; 
                    appContainer.style.display = 'flex'; 
                    setTimeout(() => { appContainer.style.opacity = '1'; startTimer(); }, 50); 
                }, 600);
            });

            themeToggleLanding.addEventListener('click', toggleTheme);
            themeToggleApp.addEventListener('click', toggleTheme);

            openSidebarBtn.addEventListener('click', () => toggleSidebar(true));
            closeSidebarBtn.addEventListener('click', () => toggleSidebar(false));
            mobileOverlay.addEventListener('click', () => toggleSidebar(false));

            adminToggleBtn.addEventListener('click', triggerAdminAuth);
            btnCancelAdmin.addEventListener('click', () => passwordModal.classList.remove('active'));
            btnSubmitAdmin.addEventListener('click', handleAdminLogin);
            adminPasswordInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleAdminLogin(); });

            btnCancelDelete.addEventListener('click', () => { deleteModal.classList.remove('active'); noteToDelete = null; });
            btnConfirmDelete.addEventListener('click', executeDeleteNote);

            triggerUploadBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', (e) => processFiles(e.target.files));

            searchInput.addEventListener('input', renderSidebar);
            
            btnFullscreen.addEventListener('click', toggleFullscreen);
            btnReadingMode.addEventListener('click', () => {
                viewerContainer.classList.toggle('reading-mode');
                if(viewerContainer.classList.contains('reading-mode')) {
                    btnReadingMode.innerHTML = 'üìñ <span>Default</span>';
                } else {
                    btnReadingMode.innerHTML = 'üìñ <span>Read Mode</span>';
                }
            });
        }

        // ================= THEME & UI =================
        function loadThemePreference() {
            const savedTheme = localStorage.getItem('engx_theme');
            if (savedTheme) { currentTheme = savedTheme; document.documentElement.setAttribute('data-theme', currentTheme); }
        }
        function toggleTheme() {
            currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('engx_theme', currentTheme);
        }
        function toggleSidebar(show) {
            if (show) { sidebar.classList.add('open'); mobileOverlay.classList.add('open'); }
            else { sidebar.classList.remove('open'); mobileOverlay.classList.remove('open'); }
        }

        // ================= ADMIN & SECURITY =================
        function triggerAdminAuth() {
            if (isAdmin) {
                setAdminMode(false);
                showToast("Admin privileges revoked.", "success");
            } else {
                passwordModal.classList.add('active');
                adminPasswordInput.value = '';
                setTimeout(() => adminPasswordInput.focus(), 100);
            }
        }

        function handleAdminLogin() {
            if (adminPasswordInput.value === ADMIN_PWD) {
                passwordModal.classList.remove('active');
                setAdminMode(true);
                showToast("Admin access authorized.", "success");
            } else {
                showToast("Authentication Failed.", "error");
                adminPasswordInput.value = '';
            }
        }

        function setAdminMode(status) {
            isAdmin = status;
            if (isAdmin) {
                adminToggleBtn.classList.add('active');
                adminToggleBtn.innerHTML = 'üîì Exit Admin';
                document.body.classList.add('admin-mode');
            } else {
                adminToggleBtn.classList.remove('active');
                adminToggleBtn.innerHTML = 'üîí Admin';
                document.body.classList.remove('admin-mode');
            }
        }

        // ================= UPLOAD LOGIC =================
        async function processFiles(files) {
            if (!files || files.length === 0) return;
            
            triggerUploadBtn.style.pointerEvents = 'none';
            uploadIcon.style.display = 'none';
            uploadLoader.style.display = 'block';
            
            for (let file of Array.from(files)) {
                if (file.type !== 'application/pdf') { showToast(`Skipped ${file.name}: Invalid Format`, "error"); continue; }
                showToast(`Encrypting ${file.name}...`, "success");
                try {
                    const base64Data = await readFileAsDataURL(file);
                    const newNote = {
                        id: 'note_' + Date.now() + Math.floor(Math.random() * 1000),
                        name: file.name.replace('.pdf', ''),
                        data: base64Data,
                        timestamp: Date.now(),
                        isFavorite: false
                    };
                    await saveNoteToDB(newNote);
                    notes.push(newNote);
                    sortNotes(); renderSidebar();
                    showToast(`Stored securely: ${newNote.name}`, "success");
                    if(notes.length === 1) loadPDF(newNote.id);
                } catch (err) { showToast(`Upload failed. Size limit exceeded.`, "error"); }
            }
            fileInput.value = ''; triggerUploadBtn.style.pointerEvents = 'all'; uploadIcon.style.display = 'inline'; uploadLoader.style.display = 'none';
        }

        function readFileAsDataURL(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.onerror = (e) => reject(e);
                reader.readAsDataURL(file);
            });
        }

        function sortNotes() { notes.sort((a, b) => { if (a.isFavorite && !b.isFavorite) return -1; if (!a.isFavorite && b.isFavorite) return 1; return b.timestamp - a.timestamp; }); }

        async function toggleFavorite(e, id) {
            e.stopPropagation();
            const note = notes.find(n => n.id === id);
            if (note) { note.isFavorite = !note.isFavorite; await saveNoteToDB(note); sortNotes(); renderSidebar(); }
        }

        // ================= RENDERING =================
        function renderSidebar() {
            const query = searchInput.value.toLowerCase();
            const filteredNotes = notes.filter(n => n.name.toLowerCase().includes(query));
            notesListEl.innerHTML = '';

            if (filteredNotes.length === 0) {
                notesListEl.innerHTML = `<div style="padding: 30px 20px; text-align: center; color: var(--text-muted); font-size: 0.95rem; background: rgba(0,0,0,0.2); border-radius: 12px; margin-top: 20px;">No secure documents found.<br><br><small>Admins must upload syllabus PDFs.</small></div>`;
                return;
            }

            // Grouping: Favorites vs All
            const favs = filteredNotes.filter(n => n.isFavorite);
            const others = filteredNotes.filter(n => !n.isFavorite);

            if (favs.length > 0) {
                const favHeader = document.createElement('div');
                favHeader.className = 'note-category';
                favHeader.textContent = '‚òÖ Pinned Documents';
                notesListEl.appendChild(favHeader);
                favs.forEach(n => notesListEl.appendChild(createNoteElement(n)));
            }

            if (others.length > 0) {
                const allHeader = document.createElement('div');
                allHeader.className = 'note-category';
                allHeader.textContent = 'üìÑ Syllabus Files';
                notesListEl.appendChild(allHeader);
                others.forEach(n => notesListEl.appendChild(createNoteElement(n)));
            }
        }

        function createNoteElement(note) {
            const li = document.createElement('li');
            li.className = `note-item allow-click ${note.id === activeNoteId ? 'active' : ''}`;
            li.onclick = () => loadPDF(note.id);
            
            const wrap = document.createElement('div');
            wrap.className = 'note-name-wrap allow-click';
            wrap.innerHTML = `<div class="note-icon allow-click">üìù</div> <span class="note-name allow-click" title="${note.name}">${note.name}</span>`;
            
            const actions = document.createElement('div');
            actions.className = 'note-actions allow-click';

            const favBtn = document.createElement('button');
            favBtn.className = `icon-btn fav-btn allow-click ${note.isFavorite ? 'active' : ''}`;
            favBtn.innerHTML = note.isFavorite ? '‚òÖ' : '‚òÜ';
            favBtn.title = note.isFavorite ? 'Unpin' : 'Pin to top';
            favBtn.onclick = (e) => toggleFavorite(e, note.id);

            const delBtn = document.createElement('button');
            delBtn.className = 'icon-btn delete-btn allow-click';
            delBtn.innerHTML = 'üóë';
            delBtn.title = 'Wipe Document';
            delBtn.onclick = (e) => { e.stopPropagation(); promptDeleteNote(note.id); };

            actions.appendChild(favBtn); actions.appendChild(delBtn);
            li.appendChild(wrap); li.appendChild(actions); 
            return li;
        }

        // ================= VIEWER LOGIC =================
        function loadPDF(id) {
            activeNoteId = id;
            const note = notes.find(n => n.id === id);
            if (!note) return;

            renderSidebar(); 
            if (window.innerWidth <= 900) toggleSidebar(false);

            emptyState.style.display = 'none';
            pdfViewer.style.display = 'block';
            currentDocTitle.textContent = note.name;
            
            // #toolbar=0 strictly hides download and print options in native PDF viewers
            pdfViewer.src = note.data + "#toolbar=0&navpanes=0&scrollbar=1&view=FitH";
        }

        function promptDeleteNote(id) { noteToDelete = id; deleteModal.classList.add('active'); }
        async function executeDeleteNote() {
            if (!noteToDelete) return;
            try {
                await deleteNoteFromDB(noteToDelete);
                notes = notes.filter(n => n.id !== noteToDelete);
                if (activeNoteId === noteToDelete) {
                    activeNoteId = null; pdfViewer.src = ''; pdfViewer.style.display = 'none'; emptyState.style.display = 'flex'; currentDocTitle.textContent = "No Document Selected";
                }
                renderSidebar(); showToast("Document wiped securely.", "success");
            } catch (err) { showToast("Failed to wipe.", "error"); }
            finally { deleteModal.classList.remove('active'); noteToDelete = null; }
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                if (document.documentElement.requestFullscreen) document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) document.exitFullscreen();
            }
        }

        // ================= UTILS =================
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            let icon = '‚úì';
            if(type === 'error') icon = 'üö´';
            if(type === 'warning') icon = '‚ö†Ô∏è';
            toast.innerHTML = `<span style="font-size: 1.3rem;">${icon}</span> <span>${message}</span>`;
            toastContainer.appendChild(toast);
            setTimeout(() => { toast.style.animation = 'slideUp 0.4s ease reverse forwards'; setTimeout(() => toast.remove(), 400); }, 3500);
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>